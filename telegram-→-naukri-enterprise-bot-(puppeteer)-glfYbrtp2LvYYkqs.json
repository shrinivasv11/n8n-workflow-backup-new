{"updatedAt":"2025-11-10T09:28:51.109Z","createdAt":"2025-11-07T06:45:28.588Z","id":"glfYbrtp2LvYYkqs","name":"Telegram → Naukri Enterprise Bot (Puppeteer)","active":false,"isArchived":true,"nodes":[{"parameters":{"updates":["message"],"additionalFields":{}},"id":"911aca11-a857-43f0-8e36-edebe761d58b","name":"Telegram Trigger","type":"n8n-nodes-base.telegramTrigger","typeVersion":1,"position":[-1616,272],"webhookId":"a80743bb-e638-4a15-81ce-98ed57bac3e6"},{"parameters":{"values":{"string":[{"name":"adminId","value":"={{$env.ADMIN_CHAT_ID}}"}]},"options":{}},"id":"5dfecfbc-9b9b-4a18-a9c9-5231da39cff4","name":"Set Admin ID","type":"n8n-nodes-base.set","typeVersion":2,"position":[-1424,272]},{"parameters":{"conditions":{"string":[{"value1":"={{$json.message.chat.id}}","value2":"={{$json.adminId}}"}]}},"id":"245e0779-44d8-485d-8ee5-f5ba7399c535","name":"Admin Only?","type":"n8n-nodes-base.if","typeVersion":1,"position":[-1216,272]},{"parameters":{"chatId":"={{$json.message.chat.id}}","text":"❌ You are not authorized to use this bot.","additionalFields":{}},"id":"df900083-c6ef-4cad-96f4-95413c911025","name":"Unauthorized → Telegram","type":"n8n-nodes-base.telegram","typeVersion":1,"position":[-1024,384],"webhookId":"5aacbe95-ca49-4177-8406-e4f695d7ad86"},{"parameters":{"method":"POST","url":"https://api.openai.com/v1/chat/completions","options":{"allowUnauthorizedCerts":false}},"id":"66957177-5920-4afb-84dc-d8d36d68894e","name":"AI Classifier (OpenAI)","type":"n8n-nodes-base.httpRequest","typeVersion":4,"position":[-1024,160]},{"parameters":{"conditions":{"number":[{"value1":"={{$json.statusCode}}","operation":"equal","value2":200}]}},"id":"4faf3a5d-1a63-4469-bb80-594dc5827695","name":"AI OK?","type":"n8n-nodes-base.if","typeVersion":1,"position":[-816,160]},{"parameters":{"functionCode":"const raw = $json.choices?.[0]?.message?.content || '{}';\nlet parsed = {};\ntry { parsed = JSON.parse(raw); } catch(e){ parsed = { action: 'HELP', payload: {}, note: 'AI parse failed' }; }\nreturn [{ json: { action: parsed.action || 'HELP', payload: parsed.payload || {}, message: $json._incoming?.message || $json.message || {} } }];\n"},"id":"64a7d090-bc09-4f02-bb62-ed11d48df873","name":"Parse AI JSON","type":"n8n-nodes-base.function","typeVersion":1,"position":[-624,112]},{"parameters":{"functionCode":"const msg = $json.message || $json._incoming?.message || {};\nconst textRaw = (msg.text || '').trim();\nconst text = textRaw.toLowerCase();\nlet action = null; let payload = {};\nif (/(^|\\b)skill/.test(text)) { action = 'UPDATE_SKILLS'; payload.skills = text.replace(/update|skills?/g,'').trim().split(/[\\s,|]+/).filter(Boolean); }\nelse if (/(headline|summary)/.test(text)) { action = 'UPDATE_HEADLINE'; payload.headline = textRaw.replace(/update|change|headline|summary/ig,'').trim(); }\nelse if (/notice/.test(text)) { action = 'UPDATE_NOTICE'; const m=textRaw.match(/(\\d+\\s*(?:day|days|week|weeks|month|months)?)/i); payload.noticePeriod = m?m[1]:textRaw.replace(/notice|period/ig,'').trim(); }\nelse if (/(resume|cv)/.test(text) && /(upload|update|replace)/.test(text)) { action='UPLOAD_RESUME'; }\nelse if (/(refresh|boost)/.test(text)) { action='REFRESH_PROFILE'; }\nelse if (/(status|check|show)/.test(text)) { action='CHECK_STATUS'; }\nelse { action = 'HELP'; }\nreturn [{ json: { action, payload, message: msg } }];\n"},"id":"c48491de-e888-4b10-ad3d-14528252f2f1","name":"Parse Intent (Fallback)","type":"n8n-nodes-base.function","typeVersion":1,"position":[-624,224]},{"parameters":{"mode":"passThrough","options":{}},"id":"16b2e7ca-dab4-4738-b71b-5a006ecaa7e0","name":"Use AI or Fallback","type":"n8n-nodes-base.merge","typeVersion":2,"position":[-416,160]},{"parameters":{},"id":"5f61cdaf-2952-425e-831c-b17f30af9d92","name":"Switch Action","type":"n8n-nodes-base.switch","typeVersion":1,"position":[-224,160]},{"parameters":{"chatId":"={{$json.message.chat.id}}","text":"Commands:\\n• update skills react nodejs\\n• update headline Senior Developer\\n• notice period 30 days\\n• upload resume (send file)\\n• refresh profile\\n• status","additionalFields":{}},"id":"26072d86-ebd4-4874-91d3-f3af550e706e","name":"Help → Telegram","type":"n8n-nodes-base.telegram","typeVersion":1,"position":[0,384],"webhookId":"03da6f69-3e87-4c3f-b09f-243abbb6eb03"},{"parameters":{"keepOnlySet":true,"values":{"string":[{"name":"ACTION","value":"update_skills"},{"name":"PAYLOAD_JSON","value":"={{ JSON.stringify({ skills: $json.payload.skills || [] }) }}"}]},"options":{}},"id":"119d2c7d-e204-496e-b313-c6d2098680d4","name":"Set ENV (Skills)","type":"n8n-nodes-base.set","typeVersion":2,"position":[0,0]},{"parameters":{"command":"node"},"id":"1dac2fc0-d478-48a5-a3df-c4e590f45beb","name":"Run Puppeteer (Skills)","type":"n8n-nodes-base.executeCommand","typeVersion":1,"position":[208,0]},{"parameters":{"chatId":"={{$json.message.chat.id}}","text":"={{$json.ok ? `✅ Skills updated (${($json.result && $json.result.updatedCount) || 0})` : `❌ ${$json.error || 'Failed'}`}}","additionalFields":{}},"id":"a4a94f9a-7970-4bba-9559-e05d37118533","name":"Reply (Skills)","type":"n8n-nodes-base.telegram","typeVersion":1,"position":[400,0],"webhookId":"2e27653b-0117-4b9b-a279-a26d9635ff30"},{"parameters":{"keepOnlySet":true,"values":{"string":[{"name":"ACTION","value":"update_headline"},{"name":"PAYLOAD_JSON","value":"={{ JSON.stringify({ headline: $json.payload.headline || '' }) }}"}]},"options":{}},"id":"8509e49a-99b0-4bcf-84a2-7ce48ed6aa34","name":"Set ENV (Headline)","type":"n8n-nodes-base.set","typeVersion":2,"position":[0,64]},{"parameters":{"command":"node"},"id":"e4aad0aa-5b30-44c7-8ddb-54a688e1a29f","name":"Run Puppeteer (Headline)","type":"n8n-nodes-base.executeCommand","typeVersion":1,"position":[208,64]},{"parameters":{"chatId":"={{$json.message.chat.id}}","text":"={{$json.ok ? `✅ Headline updated` : `❌ ${$json.error || 'Failed'}`}}","additionalFields":{}},"id":"181205c8-4d59-40ef-8ef7-a21e4a50a23f","name":"Reply (Headline)","type":"n8n-nodes-base.telegram","typeVersion":1,"position":[400,64],"webhookId":"fb26e055-0fc8-488a-8361-1df80ae92ef8"},{"parameters":{"keepOnlySet":true,"values":{"string":[{"name":"ACTION","value":"update_notice"},{"name":"PAYLOAD_JSON","value":"={{ JSON.stringify({ noticePeriod: $json.payload.noticePeriod || $json.payload.notice || '' }) }}"}]},"options":{}},"id":"587db90d-a7b8-477a-a5ca-55f4ff5486b3","name":"Set ENV (Notice)","type":"n8n-nodes-base.set","typeVersion":2,"position":[0,128]},{"parameters":{"command":"node"},"id":"e2719b30-f26d-43a7-bda5-cfb0acbe3993","name":"Run Puppeteer (Notice)","type":"n8n-nodes-base.executeCommand","typeVersion":1,"position":[208,128]},{"parameters":{"chatId":"={{$json.message.chat.id}}","text":"={{$json.ok ? `✅ Notice period updated` : `❌ ${$json.error || 'Failed'}`}}","additionalFields":{}},"id":"122f05c3-39f6-4d5c-976b-eea75bf023b9","name":"Reply (Notice)","type":"n8n-nodes-base.telegram","typeVersion":1,"position":[400,128],"webhookId":"8f4d7016-d01a-4f6f-8aae-6f9f52137773"},{"parameters":{"conditions":{"string":[{"value1":"={{$json.message.document.file_id}}","operation":"isEmpty"}]}},"id":"fe9845c8-cfc8-4763-a787-6a5c727f1c70","name":"Has File?","type":"n8n-nodes-base.if","typeVersion":1,"position":[0,192]},{"parameters":{"chatId":"={{$json.message.chat.id}}","text":"Please attach your resume file (PDF/DOC) and send again with: upload resume","additionalFields":{}},"id":"167197bc-27fd-416b-b88b-7cb2d55a11af","name":"Ask for Resume","type":"n8n-nodes-base.telegram","typeVersion":1,"position":[208,240],"webhookId":"9f7ea808-5849-428d-b964-4406a8042b05"},{"parameters":{"operation":"getFile"},"id":"c7861832-96f7-4a85-9aca-8d41bb4997d7","name":"Telegram → Get File","type":"n8n-nodes-base.telegram","typeVersion":1,"position":[208,192],"webhookId":"0e2ed061-07a2-492b-8361-c388a1c5113c"},{"parameters":{"url":"={{$json.data.fileLink}}","options":{}},"id":"fae74804-6dd7-43ab-8355-413d56a312dd","name":"Download Resume","type":"n8n-nodes-base.httpRequest","typeVersion":4,"position":[400,192]},{"parameters":{"options":{}},"id":"569d8507-273c-43d0-8122-6923dd2724f7","name":"Binary → /tmp/telegram_resume","type":"n8n-nodes-base.moveBinaryData","typeVersion":1,"position":[608,192]},{"parameters":{"keepOnlySet":true,"values":{"string":[{"name":"ACTION","value":"upload_resume"},{"name":"RESUME_PATH","value":"/tmp/telegram_resume"}]},"options":{}},"id":"86dd50be-28f9-4627-a771-6f49c54ea7ed","name":"Set ENV (Resume)","type":"n8n-nodes-base.set","typeVersion":2,"position":[800,192]},{"parameters":{"command":"node"},"id":"da80dea2-f902-4dbf-944c-5bc746b37c8f","name":"Run Puppeteer (Resume)","type":"n8n-nodes-base.executeCommand","typeVersion":1,"position":[1008,192]},{"parameters":{"chatId":"={{$json.message.chat.id}}","text":"={{$json.ok ? `✅ Resume uploaded (${($json.result && $json.result.uploaded) || ''})` : `❌ ${$json.error || 'Failed'}`}}","additionalFields":{}},"id":"742bfee8-98c9-4eb7-b264-2511a256f14e","name":"Reply (Resume)","type":"n8n-nodes-base.telegram","typeVersion":1,"position":[1200,192],"webhookId":"0c071d59-9f11-4bcb-9569-2234804b56b5"},{"parameters":{"keepOnlySet":true,"values":{"string":[{"name":"ACTION","value":"refresh_profile"}]},"options":{}},"id":"ac75779c-b9c9-495e-8300-cead4a8a9519","name":"Set ENV (Refresh)","type":"n8n-nodes-base.set","typeVersion":2,"position":[0,304]},{"parameters":{"command":"node"},"id":"df5acf7d-3a63-4574-bc2d-3baec18e0da2","name":"Run Puppeteer (Refresh)","type":"n8n-nodes-base.executeCommand","typeVersion":1,"position":[208,304]},{"parameters":{"chatId":"={{$json.message.chat.id}}","text":"={{$json.ok ? `✅ Profile refreshed` : `❌ ${$json.error || 'Failed'}`}}","additionalFields":{}},"id":"8765c320-c5a8-40ab-beee-8ffae95411ba","name":"Reply (Refresh)","type":"n8n-nodes-base.telegram","typeVersion":1,"position":[400,304],"webhookId":"e2421cd6-e074-4c93-aca8-7e7363e39eef"},{"parameters":{"keepOnlySet":true,"values":{"string":[{"name":"ACTION","value":"check_status"}]},"options":{}},"id":"0ffb38ab-735b-4a5c-a0a2-8dccc5eb56d6","name":"Set ENV (Status)","type":"n8n-nodes-base.set","typeVersion":2,"position":[0,368]},{"parameters":{"command":"node"},"id":"20a8b9e6-0a9c-4d91-a04e-ae9b268580dd","name":"Run Puppeteer (Status)","type":"n8n-nodes-base.executeCommand","typeVersion":1,"position":[208,368]},{"parameters":{"chatId":"={{$json.message.chat.id}}","text":"={{$json.ok ? `✅ Status\\nHeadline: ${$json.result.headline || '-'}\\nSkills: ${($json.result.skills || []).slice(0,8).join(', ')}\\nLast Updated: ${$json.result.lastUpdated || '-'}` : `❌ ${$json.error || 'Failed'}`}}","additionalFields":{}},"id":"db5fe737-06c7-41a0-9f4e-51876665068e","name":"Reply (Status)","type":"n8n-nodes-base.telegram","typeVersion":1,"position":[400,368],"webhookId":"8bf603fb-864d-42d5-9e08-199029f72a03"}],"connections":{},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"9285b600-e6b4-4595-8210-67cb33575417","triggerCount":0,"shared":[{"updatedAt":"2025-11-07T06:45:28.588Z","createdAt":"2025-11-07T06:45:28.588Z","role":"workflow:owner","workflowId":"glfYbrtp2LvYYkqs","projectId":"IqRuMpIxraBSc3Iy"}],"tags":[],"needsUpdate":false}